{"version":3,"sources":["../src/mod/utils.ts","../src/mod/runtime.ts"],"names":["normalizeString","value","jsx","type","props","createHTMLElement","jsxs","Fragment","fragment","normalizeChildren","child","SVG_ELEMENTS","MATHML_ELEMENTS","SVG_NAMESPACE","MATHML_NAMESPACE","element","hasValidDangerouslySetInnerHTML","key","appendChildren","handleDangerouslySetInnerHTML","handleRef","handleOnLoad","handleEvent","handleClassName","handleStyle","isSignal","handleReactiveProp","attrValue","parent","children","textNode","effect","onLoadMap","ONLOAD_ATTR","observer","initObserver","mutations","mutation","node","checkOnLoad","cb","descendant","callback","ref","eventName","handler","event","className","styles","applyStyles","cssKey","m","html","signal"],"mappings":"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","file":"jsx-dev-runtime.cjs","sourcesContent":["// src/mod/utils.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Minify HTML string by removing excess whitespace\r\n     * Collapses multiple spaces, tabs, and newlines into single spaces\r\n     * Removes leading/trailing whitespace from text nodes\r\n     * @param html - HTML string to minify\r\n     * @returns Minified HTML string\r\n     */\r\n    export function minifyHTML(html: string): string {\r\n        // Collapse multiple whitespace characters (spaces, tabs, newlines) into single space\r\n        return html\r\n            .replace(/\\s+/g, ' ')           // Replace multiple whitespace with single space\r\n            .replace(/>\\s+</g, '><')        // Remove spaces between closing and opening tags\r\n            .trim();                        // Remove leading/trailing whitespace\r\n    }\r\n\r\n    /**\r\n     * Normalize a string value by removing excess whitespace\r\n     * Useful for class names, ids, and other attributes with multi-line definitions\r\n     * @param value - String value to normalize\r\n     * @returns Normalized string with collapsed whitespace\r\n     */\r\n    export function normalizeString(value: string): string {\r\n        return value\r\n            .replace(/\\s+/g, ' ')    // Collapse multiple whitespace into single space\r\n            .trim();                 // Remove leading/trailing whitespace\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/mod/runtime.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { effect, isSignal, type Signal } from '@minejs/signals';\r\n    import type { JSXElement, JSXProps, ComponentFunction } from '../types';\r\n    import { normalizeString } from './utils';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Creates a DOM element from JSX\r\n     * This is called automatically by TypeScript when it sees JSX syntax\r\n     */\r\n    export function jsx(\r\n        type: string | ComponentFunction,\r\n        props: JSXProps | null\r\n    ): JSXElement | null {\r\n        // Handle component (function)\r\n        if (typeof type === 'function') {\r\n            return type(props || {});\r\n        }\r\n\r\n        // Handle HTML element (string)\r\n        return createHTMLElement(type, props || {});\r\n    }\r\n\r\n    /**\r\n     * Same as jsx() but for elements with multiple children\r\n     * (Used by TypeScript JSX transform)\r\n     */\r\n    export const jsxs = jsx;\r\n\r\n    /**\r\n     * Fragment component (like React.Fragment)\r\n     */\r\n    export function Fragment(props: { children?: any }): DocumentFragment {\r\n        const fragment = document.createDocumentFragment();\r\n        const children = normalizeChildren(props.children);\r\n\r\n        children.forEach(child => {\r\n            if (child instanceof Node) {\r\n                fragment.appendChild(child);\r\n            }\r\n        });\r\n\r\n        return fragment;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ ════ ════════════════════════════════════════╗\r\n\r\n    // ============================================================================\r\n    // HTML ELEMENT CREATION\r\n    // ============================================================================\r\n\r\n    // SVG elements that need to be created with createElementNS\r\n    const SVG_ELEMENTS = new Set([\r\n        'svg', 'path', 'circle', 'rect', 'line', 'polyline', 'polygon',\r\n        'ellipse', 'g', 'text', 'tspan', 'defs', 'clipPath', 'linearGradient',\r\n        'radialGradient', 'stop', 'mask', 'pattern', 'image', 'use', 'symbol',\r\n        'marker', 'foreignObject', 'animate', 'animateTransform', 'animateMotion',\r\n        'set', 'filter', 'feBlend', 'feColorMatrix', 'feComponentTransfer',\r\n        'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap',\r\n        'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR',\r\n        'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\r\n        'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile',\r\n        'feTurbulence', 'title', 'desc', 'metadata'\r\n    ]);\r\n\r\n    // MathML elements that need to be created with createElementNS\r\n    const MATHML_ELEMENTS = new Set([\r\n        'math', 'maction', 'maligngroup', 'malignmark', 'menclose', 'merror',\r\n        'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mlongdiv',\r\n        'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom',\r\n        'mroot', 'mrow', 'ms', 'mscarries', 'mscarry', 'msgroup', 'msline',\r\n        'mspace', 'msqrt', 'msrow', 'mstack', 'mstyle', 'msub', 'msup',\r\n        'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover',\r\n        'semantics', 'annotation', 'annotation-xml'\r\n    ]);\r\n\r\n    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\r\n    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\r\n\r\n    function createHTMLElement(type: string, props: JSXProps): Element {\r\n        // Determine namespace and create element appropriately\r\n        let element: Element;\r\n\r\n        if (SVG_ELEMENTS.has(type)) {\r\n            element = document.createElementNS(SVG_NAMESPACE, type);\r\n        } else if (MATHML_ELEMENTS.has(type)) {\r\n            element = document.createElementNS(MATHML_NAMESPACE, type);\r\n        } else {\r\n            element = document.createElement(type);\r\n        }\r\n\r\n        // Check if dangerouslySetInnerHTML is present and valid - it takes precedence over children\r\n        const hasValidDangerouslySetInnerHTML = 'dangerouslySetInnerHTML' in props\r\n            && props.dangerouslySetInnerHTML != null\r\n            && typeof props.dangerouslySetInnerHTML === 'object'\r\n            && '__html' in props.dangerouslySetInnerHTML\r\n            && typeof props.dangerouslySetInnerHTML.__html === 'string';\r\n\r\n        // Set properties and attributes\r\n        for (const [key, value] of Object.entries(props)) {\r\n            if (key === 'children') {\r\n                // Skip children if dangerouslySetInnerHTML is present and valid\r\n                if (!hasValidDangerouslySetInnerHTML) {\r\n                    appendChildren(element, value);\r\n                }\r\n            } else if (key === 'dangerouslySetInnerHTML') {\r\n                // Handle dangerouslySetInnerHTML - inject raw HTML\r\n                handleDangerouslySetInnerHTML(element as HTMLElement, value);\r\n            } else if (key === 'ref') {\r\n                // Handle ref\r\n                handleRef(element as HTMLElement, value);\r\n            } else if (key === 'onload') {\r\n                // Handle onload\r\n                handleOnLoad(element, value);\r\n            } else if (key.startsWith('on')) {\r\n                // Handle events (onClick, onInput, etc)\r\n                handleEvent(element, key, value);\r\n            } else if (key === 'className' || key === 'class') {\r\n                // Handle className/class\r\n                handleClassName(element, value);\r\n            } else if (key === 'style') {\r\n                // Handle inline styles\r\n                handleStyle(element as HTMLElement, value);\r\n            } else if (isSignal(value)) {\r\n                // Handle reactive props\r\n                handleReactiveProp(element, key, value);\r\n            } else if (typeof value === 'boolean') {\r\n                // Handle boolean attributes (disabled, checked, etc)\r\n                if (value) {\r\n                    element.setAttribute(key, '');\r\n                }\r\n            } else if (value != null) {\r\n                // Handle static props\r\n                // For SVG/MathML elements, always use setAttribute to preserve case sensitivity\r\n                if (SVG_ELEMENTS.has(type) || MATHML_ELEMENTS.has(type)) {\r\n                    const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                    element.setAttribute(key, attrValue);\r\n                } else {\r\n                    // For HTML elements, prefer property assignment\r\n                    if (key in element) {\r\n                        (element as any)[key] = value;\r\n                    } else {\r\n                        const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                        element.setAttribute(key, attrValue);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    // ============================================================================\r\n    // CHILDREN HANDLING\r\n    // ============================================================================\r\n\r\n    function appendChildren(parent: Element, children: any): void {\r\n        const normalized = normalizeChildren(children);\r\n\r\n        normalized.forEach(child => {\r\n            if (child instanceof Node) {\r\n                parent.appendChild(child);\r\n            } else if (isSignal(child)) {\r\n                // Reactive text node\r\n                const textNode = document.createTextNode('');\r\n                effect(() => {\r\n                    textNode.textContent = String(child());\r\n                });\r\n                parent.appendChild(textNode);\r\n            } else if (child != null && child !== false) {\r\n                // Static text node\r\n                parent.appendChild(document.createTextNode(String(child)));\r\n            }\r\n        });\r\n    }\r\n\r\n    function normalizeChildren(children: any): any[] {\r\n        if (children == null || children === false) {\r\n            return [];\r\n        }\r\n\r\n        if (Array.isArray(children)) {\r\n            return children.flatMap(normalizeChildren);\r\n        }\r\n\r\n        return [children];\r\n    }\r\n\r\n    // ============================================================================\r\n    // ONLOAD HANDLING\r\n    // ============================================================================\r\n\r\n    const onLoadMap = new WeakMap<Element, () => void>();\r\n    const ONLOAD_ATTR = 'data-mine-onload';\r\n    let observer: MutationObserver | null = null;\r\n\r\n    function initObserver() {\r\n        if (observer) return;\r\n        if (typeof MutationObserver === 'undefined') return;\r\n\r\n        observer = new MutationObserver((mutations) => {\r\n            mutations.forEach(mutation => {\r\n                mutation.addedNodes.forEach(node => {\r\n                    if (node.nodeType === 1) { // Node.ELEMENT_NODE\r\n                        checkOnLoad(node as Element);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        observer.observe(document, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n    }\r\n\r\n    function checkOnLoad(element: Element) {\r\n        if (element.hasAttribute(ONLOAD_ATTR)) {\r\n            const cb = onLoadMap.get(element);\r\n            if (cb) cb();\r\n        }\r\n\r\n        // Check descendants\r\n        const descendants = element.querySelectorAll(`[${ONLOAD_ATTR}]`);\r\n        descendants.forEach(descendant => {\r\n            const cb = onLoadMap.get(descendant);\r\n            if (cb) cb();\r\n        });\r\n    }\r\n\r\n    function handleOnLoad(element: Element, callback: any): void {\r\n        if (typeof callback !== 'function') return;\r\n\r\n        onLoadMap.set(element, callback);\r\n        element.setAttribute(ONLOAD_ATTR, 'true');\r\n        initObserver();\r\n    }\r\n\r\n    // ============================================================================\r\n    // REF HANDLING\r\n    // ============================================================================\r\n\r\n    function handleRef(element: HTMLElement, ref: any): void {\r\n        if (isSignal(ref)) {\r\n            ref.set(element);\r\n        } else if (typeof ref === 'function') {\r\n            ref(element);\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // EVENT HANDLING\r\n    // ============================================================================\r\n\r\n    function handleEvent(element: Element, eventName: string, handler: any): void {\r\n        if (typeof handler !== 'function') return;\r\n\r\n        // Convert onClick → click, onInput → input, etc\r\n        const event = eventName.slice(2).toLowerCase();\r\n\r\n        element.addEventListener(event, handler);\r\n    }\r\n\r\n    // ============================================================================\r\n    // CLASS NAME HANDLING\r\n    // ============================================================================\r\n\r\n    function handleClassName(element: Element, value: any): void {\r\n        if (isSignal(value)) {\r\n            // Reactive className\r\n            effect(() => {\r\n                const className = value();\r\n                if (className != null) {\r\n                    element.className = normalizeString(String(className));\r\n                }\r\n            });\r\n        } else if (value != null) {\r\n            // Static className\r\n            element.className = normalizeString(String(value));\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // STYLE HANDLING\r\n    // ============================================================================\r\n\r\n    function handleStyle(element: HTMLElement, value: any): void {\r\n        if (isSignal(value)) {\r\n            // Reactive style object\r\n            effect(() => {\r\n                const styles = value();\r\n                applyStyles(element, styles);\r\n            });\r\n        } else {\r\n            // Static style\r\n            applyStyles(element, value);\r\n        }\r\n    }\r\n\r\n    function applyStyles(element: HTMLElement, styles: any): void {\r\n        if (typeof styles === 'string') {\r\n            element.style.cssText = styles;\r\n        } else if (typeof styles === 'object' && styles != null) {\r\n            Object.entries(styles).forEach(([key, value]) => {\r\n                if (value != null) {\r\n                    // Convert camelCase to kebab-case\r\n                    const cssKey = key.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\r\n                    element.style.setProperty(cssKey, String(value));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // DANGEROUSLY SET INNER HTML\r\n    // ============================================================================\r\n\r\n    function handleDangerouslySetInnerHTML(element: HTMLElement, value: any): void {\r\n        if (value != null && typeof value === 'object' && '__html' in value) {\r\n            // Extract __html property and inject as raw HTML\r\n            const html = value.__html;\r\n            if (typeof html === 'string') {\r\n                element.innerHTML = html;\r\n            }\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // REACTIVE PROP HANDLING\r\n    // ============================================================================\r\n\r\n    function handleReactiveProp(element: Element, key: string, signal: Signal<any>): void {\r\n        effect(() => {\r\n            const value = signal();\r\n\r\n            if (value != null) {\r\n                if (key === 'className' || key === 'class') {\r\n                    // Normalize className/class for reactive props\r\n                    element.className = normalizeString(String(value));\r\n                } else if (key in element) {\r\n                    // Set as property (for input.value, etc)\r\n                    ; (element as any)[key] = value;\r\n                } else {\r\n                    // Set as attribute, normalize if string\r\n                    const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                    element.setAttribute(key, attrValue);\r\n                }\r\n            } else {\r\n                element.removeAttribute(key);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create a component from a function\r\n     * Provides a cleaner API than raw JSX\r\n     */\r\n    export function component<P = any>(\r\n        fn: (props: P) => JSXElement | null\r\n    ): ComponentFunction<P> {\r\n        return fn;\r\n    }\r\n\r\n    /**\r\n     * Create a component with setup function\r\n     * Similar to Vue's Composition API\r\n     */\r\n    export function defineComponent<P = any>(\r\n        setup: (props: P) => () => JSXElement | null\r\n    ): ComponentFunction<P> {\r\n        return (props: P) => {\r\n            const render = setup(props);\r\n            return render();\r\n        };\r\n    }\r\n\r\n    // ============================================================================\r\n    // UTILITY FUNCTIONS\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Create multiple elements at once\r\n     */\r\n    export function createElements(elements: any[]): DocumentFragment {\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        elements.forEach(el => {\r\n            if (el instanceof Node) {\r\n                fragment.appendChild(el);\r\n            }\r\n        });\r\n\r\n        return fragment;\r\n    }\r\n\r\n    /**\r\n     * Show/hide element based on condition\r\n     */\r\n    export function Show(props: {\r\n        when: boolean | Signal<boolean>\r\n        children: any\r\n    }): JSXElement | null {\r\n        if (isSignal(props.when)) {\r\n            const placeholder = document.createComment('show');\r\n            const parent = document.createDocumentFragment();\r\n            parent.appendChild(placeholder);\r\n\r\n            let currentElement: Element | null = null;\r\n\r\n            effect(() => {\r\n                const when = props.when as Signal<boolean>;\r\n                const condition = when();\r\n\r\n                if (condition && !currentElement) {\r\n                    // Show: create and insert element\r\n                    const children = normalizeChildren(props.children);\r\n                    currentElement = children[0] as Element;\r\n\r\n                    if (currentElement instanceof Node) {\r\n                        placeholder.parentNode?.insertBefore(currentElement, placeholder);\r\n                    }\r\n                } else if (!condition && currentElement) {\r\n                    // Hide: remove element\r\n                    currentElement.remove();\r\n                    currentElement = null;\r\n                }\r\n            });\r\n\r\n            return parent as any;\r\n        } else {\r\n            // Static condition\r\n            return (props.when as boolean) ? jsx(Fragment, { children: props.children }) : null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render different elements based on condition\r\n     */\r\n    export function Switch(props: {\r\n        children: { when: boolean | Signal<boolean>; children: any }[]\r\n    }): JSXElement | null {\r\n        // Find first matching case\r\n        for (const caseItem of props.children) {\r\n            const condition = isSignal(caseItem.when) ? caseItem.when() : caseItem.when;\r\n\r\n            if (condition) {\r\n                return jsx(Fragment, { children: caseItem.children });\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Iterate over array and render elements\r\n     */\r\n    export function For<T>(props: {\r\n        each: T[] | Signal<T[]>\r\n        children: (item: T, index: number) => JSXElement\r\n    }): JSXElement {\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        if (isSignal(props.each)) {\r\n            // Reactive list\r\n            const container = document.createElement('div');\r\n            container.style.display = 'contents'; // Don't affect layout\r\n\r\n            effect(() => {\r\n                const each = props.each as Signal<T[]>;\r\n                const items = each();\r\n                container.innerHTML = ''; // Clear\r\n\r\n                items.forEach((item: any, index: any) => {\r\n                    const element = props.children(item, index);\r\n                    if (element instanceof Node) {\r\n                        container.appendChild(element);\r\n                    }\r\n                });\r\n            });\r\n\r\n            fragment.appendChild(container);\r\n        } else {\r\n            // Static list\r\n            const each = props.each as T[];\r\n            each.forEach((item, index) => {\r\n                const element = props.children(item, index);\r\n                if (element instanceof Node) {\r\n                    fragment.appendChild(element);\r\n                }\r\n            });\r\n        }\r\n\r\n        return fragment as any;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n"]}