{"version":3,"sources":["../src/mod/render.ts","../src/mod/utils.ts","../src/mod/runtime.ts"],"names":["updateQueue","isFlushPending","render","component","container","options","target","element","newElement","mount","createPortal","children","placeholder","hydrate","targetElement","lazy","loader","fallback","loadedComponent","loading","error","props","errorDiv","module","err","createLoadingElement","div","ErrorBoundary","Suspense","Teleport","queueUpdate","fn","flushUpdates","updates","isBrowser","onDOMReady","callback","createRoot","mounted","minifyHTML","html","normalizeString","value","cleanClassName","tokens","seen","result","i","token","jsx","type","createHTMLElement","jsxs","Fragment","fragment","normalizeChildren","child","SVG_ELEMENTS","MATHML_ELEMENTS","SVG_NAMESPACE","MATHML_NAMESPACE","hasValidDangerouslySetInnerHTML","key","appendChildren","handleDangerouslySetInnerHTML","handleRef","handleOnLoad","handleEvent","handleClassName","handleStyle","isSignal","handleReactiveProp","attrValue","parent","textNode","effect","onLoadMap","ONLOAD_ATTR","observer","initObserver","mutations","mutation","node","checkOnLoad","cb","descendant","ref","eventName","handler","event","className","styles","applyStyles","cssKey","m","signal","defineComponent","setup","createElements","elements","el","Show","currentElement","when","condition","Switch","caseItem","For","each","items","item","index"],"mappings":"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","file":"index.cjs","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/mod/render.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import type { JSXElement, RenderOptions, MountedComponent } from '../types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    let updateQueue: (() => void)[] = [];\r\n    let isFlushPending = false;\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Render a component to the DOM\r\n     * @param component - Component or JSX element to render\r\n     * @param container - DOM element or selector to mount to\r\n     * @param options - Rendering options (mode, callbacks)\r\n     * @returns MountedComponent with unmount and update methods\r\n     * @throws Error if container not found or component returns null\r\n     * @example\r\n     * const el = jsx('div', { children: 'Hello' });\r\n     * render(el, document.body);\r\n     */\r\n    export function render(\r\n        component: JSXElement | (() => JSXElement),\r\n        container: HTMLElement | string,\r\n        options: RenderOptions = {}\r\n    ): MountedComponent {\r\n        // Resolve container\r\n        const target = typeof container === 'string'\r\n            ? document.querySelector(container)\r\n            : container;\r\n\r\n        if (!target) {\r\n            throw new Error(`Container not found: ${container}`);\r\n        }\r\n\r\n        // Get element from component\r\n        const element = typeof component === 'function' ? component() : component;\r\n\r\n        if (!element) {\r\n            throw new Error('Component returned null or undefined');\r\n        }\r\n\r\n        // Mount to DOM based on mode\r\n        const mode = options.mode || 'replace';\r\n\r\n        switch (mode) {\r\n            case 'replace':\r\n                target.innerHTML = '';\r\n                target.appendChild(element as Node);\r\n                break;\r\n\r\n            case 'append':\r\n                target.appendChild(element as Node);\r\n                break;\r\n\r\n            case 'prepend':\r\n                target.insertBefore(element as Node, target.firstChild);\r\n                break;\r\n\r\n            default:\r\n                // Invalid mode, fall back to replace\r\n                target.innerHTML = '';\r\n                target.appendChild(element as Node);\r\n        }\r\n\r\n        // Call onMount callback\r\n        options.onMount?.();\r\n\r\n        // Return mounted component interface\r\n        return {\r\n            element: element as Element | DocumentFragment,\r\n\r\n            unmount: () => {\r\n                if (element instanceof Element) {\r\n                    element.remove();\r\n                } else if (element instanceof DocumentFragment) {\r\n                    // DocumentFragment doesn't have remove method, remove all children\r\n                    while (element.firstChild) {\r\n                        element.removeChild(element.firstChild);\r\n                    }\r\n                }\r\n                options.onUnmount?.();\r\n            },\r\n\r\n            update: (newElement: JSXElement) => {\r\n                if (element instanceof Element && newElement instanceof Element) {\r\n                    element.replaceWith(newElement);\r\n                } else if (newElement instanceof Element) {\r\n                    // If current is DocumentFragment and new is Element\r\n                    if (element instanceof DocumentFragment && element.parentNode) {\r\n                        element.parentNode.replaceChild(newElement, element);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Simple mount function (alias for render with replace mode)\r\n     */\r\n    export function mount(\r\n        component: JSXElement | (() => JSXElement),\r\n        container: HTMLElement | string\r\n    ): MountedComponent {\r\n        return render(component, container, { mode: 'replace' });\r\n    }\r\n\r\n    /**\r\n     * Render component to a different location in the DOM\r\n     */\r\n    export function createPortal(\r\n        children: JSXElement,\r\n        container: HTMLElement | string\r\n    ): JSXElement {\r\n        const target = typeof container === 'string'\r\n            ? document.querySelector(container)\r\n            : container;\r\n\r\n        if (!target) {\r\n            throw new Error(`Portal container not found: ${container}`);\r\n        }\r\n\r\n        // Create a placeholder comment\r\n        const placeholder = document.createComment('portal');\r\n\r\n        // Mount children to target\r\n        if (children instanceof Node) {\r\n            target.appendChild(children);\r\n        }\r\n\r\n        return placeholder as any;\r\n    }\r\n\r\n    /**\r\n     * Hydrate server-rendered HTML with client-side interactivity\r\n     * @param component - Component to hydrate\r\n     * @param container - Container with server-rendered HTML\r\n     */\r\n    export function hydrate(\r\n        component: JSXElement | (() => JSXElement),\r\n        container: HTMLElement | string\r\n    ): MountedComponent {\r\n        const targetElement = typeof container === 'string'\r\n            ? document.querySelector(container)\r\n            : container;\r\n\r\n        const target = targetElement instanceof HTMLElement ? targetElement : null;\r\n\r\n        if (!target) {\r\n            throw new Error(`Container not found: ${container}`);\r\n        }\r\n\r\n        // For now, just replace (future: smart hydration)\r\n        return render(component, target, { mode: 'replace' });\r\n    }\r\n\r\n    /**\r\n     * Lazy load a component with dynamic imports\r\n     * @param loader - Async function that returns a component module\r\n     * @param fallback - Element to show while loading (optional)\r\n     * @returns A component that renders loaded component or fallback/error state\r\n     * @example\r\n     * const LazyComponent = lazy(() => import('./Component'), <div>Loading...</div>);\r\n     */\r\n    export function lazy<P = any>(\r\n        loader: () => Promise<{ default: (props: P) => JSXElement }>,\r\n        fallback?: JSXElement\r\n    ): (props: P) => JSXElement {\r\n        let loadedComponent: ((props: P) => JSXElement) | null = null;\r\n        let loading = false;\r\n        let error: Error | null = null;\r\n\r\n        return (props: P) => {\r\n            // If already loaded, return component\r\n            if (loadedComponent) {\r\n                return loadedComponent(props);\r\n            }\r\n\r\n            // If error occurred, show error\r\n            if (error) {\r\n                const errorDiv = document.createElement('div');\r\n                errorDiv.className = 'crux-lazy-error';\r\n                errorDiv.textContent = `Error loading component: ${error.message}`;\r\n                errorDiv.style.color = 'red';\r\n                return errorDiv;\r\n            }\r\n\r\n            // If not loading yet, start loading\r\n            if (!loading) {\r\n                loading = true;\r\n\r\n                loader()\r\n                    .then(module => {\r\n                        loadedComponent = module.default;\r\n                        // TODO: Trigger re-render when loaded\r\n                    })\r\n                    .catch(err => {\r\n                        error = err instanceof Error ? err : new Error(String(err));\r\n                        // TODO: Trigger re-render on error\r\n                    });\r\n            }\r\n\r\n            // Show fallback while loading\r\n            return fallback || createLoadingElement();\r\n        };\r\n    }\r\n\r\n    function createLoadingElement(): HTMLElement {\r\n        const div = document.createElement('div');\r\n        div.textContent = 'Loading...';\r\n        return div;\r\n    }\r\n\r\n    /**\r\n     * Error boundary component\r\n     */\r\n    export function ErrorBoundary(props: {\r\n        fallback: (error: Error) => JSXElement\r\n        children: JSXElement\r\n    }): JSXElement {\r\n        try {\r\n            return props.children;\r\n        } catch (error) {\r\n            return props.fallback(error as Error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Suspense component for handling loading states\r\n     */\r\n    export function Suspense(props: {\r\n        fallback: JSXElement\r\n        children: JSXElement | Promise<JSXElement>\r\n    }): JSXElement {\r\n        if (props.children instanceof Promise) {\r\n            // Create container for async content\r\n            const container = document.createElement('div');\r\n            container.style.display = 'contents';\r\n\r\n            // Show fallback first\r\n            if (props.fallback instanceof Node) {\r\n                container.appendChild(props.fallback);\r\n            }\r\n\r\n            // Load actual content\r\n            props.children.then(element => {\r\n                container.innerHTML = '';\r\n                if (element instanceof Node) {\r\n                    container.appendChild(element);\r\n                }\r\n            });\r\n\r\n            return container;\r\n        } else {\r\n            return props.children;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Teleport component (like Vue's Teleport)\r\n     */\r\n    export function Teleport(props: {\r\n        to: string | HTMLElement\r\n        children: JSXElement\r\n    }): JSXElement {\r\n        return createPortal(props.children, props.to);\r\n    }\r\n\r\n    /**\r\n     * Queue a DOM update to be batched\r\n     */\r\n    export function queueUpdate(fn: () => void): void {\r\n        updateQueue.push(fn);\r\n\r\n        if (!isFlushPending) {\r\n            isFlushPending = true;\r\n            queueMicrotask(flushUpdates);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Flush all queued updates\r\n     */\r\n    function flushUpdates(): void {\r\n        const updates = updateQueue;\r\n        updateQueue = [];\r\n        isFlushPending = false;\r\n\r\n        updates.forEach(fn => fn());\r\n    }\r\n\r\n    // ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n    // ╔════════════════════════════════════════ HELP ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Check if code is running in browser\r\n     */\r\n    export function isBrowser(): boolean {\r\n        return typeof window !== 'undefined' && typeof document !== 'undefined';\r\n    }\r\n\r\n    /**\r\n     * Wait for DOM to be ready\r\n     */\r\n    export function onDOMReady(callback: () => void): void {\r\n        if (isBrowser()) {\r\n            if (document.readyState === 'loading') {\r\n                document.addEventListener('DOMContentLoaded', callback);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a root for rendering\r\n     */\r\n    export function createRoot(container: HTMLElement | string) {\r\n        const target = typeof container === 'string'\r\n            ? document.querySelector(container)\r\n            : container;\r\n\r\n        if (!target || !(target instanceof HTMLElement)) {\r\n            throw new Error(`Root container not found: ${container}`);\r\n        }\r\n\r\n        let mounted: MountedComponent | null = null;\r\n\r\n        return {\r\n            render(component: JSXElement | (() => JSXElement)) {\r\n                if (mounted) {\r\n                    mounted.unmount();\r\n                }\r\n                mounted = render(component, target);\r\n            },\r\n\r\n            unmount() {\r\n                if (mounted) {\r\n                    mounted.unmount();\r\n                    mounted = null;\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/mod/utils.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Minify HTML string by removing excess whitespace\r\n     * Collapses multiple spaces, tabs, and newlines into single spaces\r\n     * Removes leading/trailing whitespace from text nodes\r\n     * @param html - HTML string to minify\r\n     * @returns Minified HTML string\r\n     */\r\n    export function minifyHTML(html: string): string {\r\n        // Collapse multiple whitespace characters (spaces, tabs, newlines) into single space\r\n        return html\r\n            .replace(/\\s+/g, ' ')           // Replace multiple whitespace with single space\r\n            .replace(/>\\s+</g, '><')        // Remove spaces between closing and opening tags\r\n            .trim();                        // Remove leading/trailing whitespace\r\n    }\r\n\r\n    /**\r\n     * Normalize a string value by removing excess whitespace\r\n     * Useful for class names, ids, and other attributes with multi-line definitions\r\n     * @param value - String value to normalize\r\n     * @returns Normalized string with collapsed whitespace\r\n     */\r\n    export function normalizeString(value: string): string {\r\n        return value\r\n            .replace(/\\s+/g, ' ')    // Collapse multiple whitespace into single space\r\n            .trim();                 // Remove leading/trailing whitespace\r\n    }\r\n\r\n    /**\r\n     * Clean up class names by removing duplicates and keeping the latest one\r\n     * @param value - Class name string\r\n     * @returns Cleaned class name string\r\n     */\r\n    export function cleanClassName(value: string): string {\r\n        const tokens = value.trim().split(/\\s+/);\r\n        // optimization: if 0 or 1 token, just return trimmed\r\n        if (tokens.length <= 1 && tokens[0] === '') return '';\r\n        if (tokens.length === 1) return tokens[0];\r\n\r\n        const seen = new Set<string>();\r\n        const result: string[] = [];\r\n\r\n        // Iterate backwards to keep latest\r\n        for (let i = tokens.length - 1; i >= 0; i--) {\r\n            const token = tokens[i];\r\n            if (token && !seen.has(token)) {\r\n                seen.add(token);\r\n                result.push(token);\r\n            }\r\n        }\r\n\r\n        return result.reverse().join(' ');\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/mod/runtime.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { effect, isSignal, type Signal } from '@minejs/signals';\r\n    import type { JSXElement, JSXProps, ComponentFunction } from '../types';\r\n    import { normalizeString, cleanClassName } from './utils';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Creates a DOM element from JSX\r\n     * This is called automatically by TypeScript when it sees JSX syntax\r\n     */\r\n    export function jsx(\r\n        type: string | ComponentFunction,\r\n        props: JSXProps | null\r\n    ): JSXElement | null {\r\n        // Handle component (function)\r\n        if (typeof type === 'function') {\r\n            return type(props || {});\r\n        }\r\n\r\n        // Handle HTML element (string)\r\n        return createHTMLElement(type, props || {});\r\n    }\r\n\r\n    /**\r\n     * Same as jsx() but for elements with multiple children\r\n     * (Used by TypeScript JSX transform)\r\n     */\r\n    export const jsxs = jsx;\r\n\r\n    /**\r\n     * Fragment component (like React.Fragment)\r\n     */\r\n    export function Fragment(props: { children?: any }): DocumentFragment {\r\n        const fragment = document.createDocumentFragment();\r\n        const children = normalizeChildren(props.children);\r\n\r\n        children.forEach(child => {\r\n            if (child instanceof Node) {\r\n                fragment.appendChild(child);\r\n            }\r\n        });\r\n\r\n        return fragment;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ ════ ════════════════════════════════════════╗\r\n\r\n    // ============================================================================\r\n    // HTML ELEMENT CREATION\r\n    // ============================================================================\r\n\r\n    // SVG elements that need to be created with createElementNS\r\n    const SVG_ELEMENTS = new Set([\r\n        'svg', 'path', 'circle', 'rect', 'line', 'polyline', 'polygon',\r\n        'ellipse', 'g', 'text', 'tspan', 'defs', 'clipPath', 'linearGradient',\r\n        'radialGradient', 'stop', 'mask', 'pattern', 'image', 'use', 'symbol',\r\n        'marker', 'foreignObject', 'animate', 'animateTransform', 'animateMotion',\r\n        'set', 'filter', 'feBlend', 'feColorMatrix', 'feComponentTransfer',\r\n        'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap',\r\n        'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR',\r\n        'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\r\n        'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile',\r\n        'feTurbulence', 'title', 'desc', 'metadata'\r\n    ]);\r\n\r\n    // MathML elements that need to be created with createElementNS\r\n    const MATHML_ELEMENTS = new Set([\r\n        'math', 'maction', 'maligngroup', 'malignmark', 'menclose', 'merror',\r\n        'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mlongdiv',\r\n        'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom',\r\n        'mroot', 'mrow', 'ms', 'mscarries', 'mscarry', 'msgroup', 'msline',\r\n        'mspace', 'msqrt', 'msrow', 'mstack', 'mstyle', 'msub', 'msup',\r\n        'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover',\r\n        'semantics', 'annotation', 'annotation-xml'\r\n    ]);\r\n\r\n    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\r\n    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\r\n\r\n    function createHTMLElement(type: string, props: JSXProps): Element {\r\n        // Determine namespace and create element appropriately\r\n        let element: Element;\r\n\r\n        if (SVG_ELEMENTS.has(type)) {\r\n            element = document.createElementNS(SVG_NAMESPACE, type);\r\n        } else if (MATHML_ELEMENTS.has(type)) {\r\n            element = document.createElementNS(MATHML_NAMESPACE, type);\r\n        } else {\r\n            element = document.createElement(type);\r\n        }\r\n\r\n        // Check if dangerouslySetInnerHTML is present and valid - it takes precedence over children\r\n        const hasValidDangerouslySetInnerHTML = 'dangerouslySetInnerHTML' in props\r\n            && props.dangerouslySetInnerHTML != null\r\n            && typeof props.dangerouslySetInnerHTML === 'object'\r\n            && '__html' in props.dangerouslySetInnerHTML\r\n            && typeof props.dangerouslySetInnerHTML.__html === 'string';\r\n\r\n        // Set properties and attributes\r\n        for (const [key, value] of Object.entries(props)) {\r\n            if (key === 'children') {\r\n                // Skip children if dangerouslySetInnerHTML is present and valid\r\n                if (!hasValidDangerouslySetInnerHTML) {\r\n                    appendChildren(element, value);\r\n                }\r\n            } else if (key === 'dangerouslySetInnerHTML') {\r\n                // Handle dangerouslySetInnerHTML - inject raw HTML\r\n                handleDangerouslySetInnerHTML(element as HTMLElement, value);\r\n            } else if (key === 'ref') {\r\n                // Handle ref\r\n                handleRef(element as HTMLElement, value);\r\n            } else if (key === 'onload') {\r\n                // Handle onload\r\n                handleOnLoad(element, value);\r\n            } else if (key.startsWith('on')) {\r\n                // Handle events (onClick, onInput, etc)\r\n                handleEvent(element, key, value);\r\n            } else if (key === 'className' || key === 'class') {\r\n                // Handle className/class\r\n                handleClassName(element, value);\r\n            } else if (key === 'style') {\r\n                // Handle inline styles\r\n                handleStyle(element as HTMLElement, value);\r\n            } else if (isSignal(value)) {\r\n                // Handle reactive props\r\n                handleReactiveProp(element, key, value);\r\n            } else if (typeof value === 'boolean') {\r\n                // Handle boolean attributes (disabled, checked, etc)\r\n                if (value) {\r\n                    element.setAttribute(key, '');\r\n                }\r\n            } else if (value != null) {\r\n                // Handle static props\r\n                // For SVG/MathML elements, always use setAttribute to preserve case sensitivity\r\n                if (SVG_ELEMENTS.has(type) || MATHML_ELEMENTS.has(type)) {\r\n                    const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                    element.setAttribute(key, attrValue);\r\n                } else {\r\n                    // For HTML elements, prefer property assignment\r\n                    if (key in element) {\r\n                        (element as any)[key] = value;\r\n                    } else {\r\n                        const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                        element.setAttribute(key, attrValue);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    // ============================================================================\r\n    // CHILDREN HANDLING\r\n    // ============================================================================\r\n\r\n    function appendChildren(parent: Element, children: any): void {\r\n        const normalized = normalizeChildren(children);\r\n\r\n        normalized.forEach(child => {\r\n            if (child instanceof Node) {\r\n                parent.appendChild(child);\r\n            } else if (isSignal(child)) {\r\n                // Reactive text node\r\n                const textNode = document.createTextNode('');\r\n                effect(() => {\r\n                    textNode.textContent = String(child());\r\n                });\r\n                parent.appendChild(textNode);\r\n            } else if (child != null && child !== false) {\r\n                // Static text node\r\n                parent.appendChild(document.createTextNode(String(child)));\r\n            }\r\n        });\r\n    }\r\n\r\n    function normalizeChildren(children: any): any[] {\r\n        if (children == null || children === false) {\r\n            return [];\r\n        }\r\n\r\n        if (Array.isArray(children)) {\r\n            return children.flatMap(normalizeChildren);\r\n        }\r\n\r\n        return [children];\r\n    }\r\n\r\n    // ============================================================================\r\n    // ONLOAD HANDLING\r\n    // ============================================================================\r\n\r\n    const onLoadMap = new WeakMap<Element, () => void>();\r\n    const ONLOAD_ATTR = 'data-mine-onload';\r\n    let observer: MutationObserver | null = null;\r\n\r\n    function initObserver() {\r\n        if (observer) return;\r\n        if (typeof MutationObserver === 'undefined') return;\r\n\r\n        observer = new MutationObserver((mutations) => {\r\n            mutations.forEach(mutation => {\r\n                mutation.addedNodes.forEach(node => {\r\n                    if (node.nodeType === 1) { // Node.ELEMENT_NODE\r\n                        checkOnLoad(node as Element);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        observer.observe(document, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n    }\r\n\r\n    function checkOnLoad(element: Element) {\r\n        if (element.hasAttribute(ONLOAD_ATTR)) {\r\n            const cb = onLoadMap.get(element);\r\n            if (cb) cb();\r\n        }\r\n\r\n        // Check descendants\r\n        const descendants = element.querySelectorAll(`[${ONLOAD_ATTR}]`);\r\n        descendants.forEach(descendant => {\r\n            const cb = onLoadMap.get(descendant);\r\n            if (cb) cb();\r\n        });\r\n    }\r\n\r\n    function handleOnLoad(element: Element, callback: any): void {\r\n        if (typeof callback !== 'function') return;\r\n\r\n        onLoadMap.set(element, callback);\r\n        element.setAttribute(ONLOAD_ATTR, 'true');\r\n        initObserver();\r\n    }\r\n\r\n    // ============================================================================\r\n    // REF HANDLING\r\n    // ============================================================================\r\n\r\n    function handleRef(element: HTMLElement, ref: any): void {\r\n        if (isSignal(ref)) {\r\n            ref.set(element);\r\n        } else if (typeof ref === 'function') {\r\n            ref(element);\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // EVENT HANDLING\r\n    // ============================================================================\r\n\r\n    function handleEvent(element: Element, eventName: string, handler: any): void {\r\n        if (typeof handler !== 'function') return;\r\n\r\n        // Convert onClick → click, onInput → input, etc\r\n        const event = eventName.slice(2).toLowerCase();\r\n\r\n        element.addEventListener(event, handler);\r\n    }\r\n\r\n    // ============================================================================\r\n    // CLASS NAME HANDLING\r\n    // ============================================================================\r\n\r\n    function handleClassName(element: Element, value: any): void {\r\n        if (isSignal(value)) {\r\n            // Reactive className\r\n            effect(() => {\r\n                const className = value();\r\n                if (className != null) {\r\n                    element.className = cleanClassName(String(className));\r\n                }\r\n            });\r\n        } else if (value != null) {\r\n            // Static className\r\n            element.className = cleanClassName(String(value));\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // STYLE HANDLING\r\n    // ============================================================================\r\n\r\n    function handleStyle(element: HTMLElement, value: any): void {\r\n        if (isSignal(value)) {\r\n            // Reactive style object\r\n            effect(() => {\r\n                const styles = value();\r\n                applyStyles(element, styles);\r\n            });\r\n        } else {\r\n            // Static style\r\n            applyStyles(element, value);\r\n        }\r\n    }\r\n\r\n    function applyStyles(element: HTMLElement, styles: any): void {\r\n        if (typeof styles === 'string') {\r\n            element.style.cssText = styles;\r\n        } else if (typeof styles === 'object' && styles != null) {\r\n            Object.entries(styles).forEach(([key, value]) => {\r\n                if (value != null) {\r\n                    // Convert camelCase to kebab-case\r\n                    const cssKey = key.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\r\n                    element.style.setProperty(cssKey, String(value));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // DANGEROUSLY SET INNER HTML\r\n    // ============================================================================\r\n\r\n    function handleDangerouslySetInnerHTML(element: HTMLElement, value: any): void {\r\n        if (value != null && typeof value === 'object' && '__html' in value) {\r\n            // Extract __html property and inject as raw HTML\r\n            const html = value.__html;\r\n            if (typeof html === 'string') {\r\n                element.innerHTML = html;\r\n            }\r\n        }\r\n    }\r\n\r\n    // ============================================================================\r\n    // REACTIVE PROP HANDLING\r\n    // ============================================================================\r\n\r\n    function handleReactiveProp(element: Element, key: string, signal: Signal<any>): void {\r\n        effect(() => {\r\n            const value = signal();\r\n\r\n            if (value != null) {\r\n                if (key === 'className' || key === 'class') {\r\n                    // Normalize className/class for reactive props\r\n                    element.className = normalizeString(String(value));\r\n                } else if (key in element) {\r\n                    // Set as property (for input.value, etc)\r\n                    ; (element as any)[key] = value;\r\n                } else {\r\n                    // Set as attribute, normalize if string\r\n                    const attrValue = typeof value === 'string' ? normalizeString(value) : String(value);\r\n                    element.setAttribute(key, attrValue);\r\n                }\r\n            } else {\r\n                element.removeAttribute(key);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create a component from a function\r\n     * Provides a cleaner API than raw JSX\r\n     */\r\n    export function component<P = any>(\r\n        fn: (props: P) => JSXElement | null\r\n    ): ComponentFunction<P> {\r\n        return fn;\r\n    }\r\n\r\n    /**\r\n     * Create a component with setup function\r\n     * Similar to Vue's Composition API\r\n     */\r\n    export function defineComponent<P = any>(\r\n        setup: (props: P) => () => JSXElement | null\r\n    ): ComponentFunction<P> {\r\n        return (props: P) => {\r\n            const render = setup(props);\r\n            return render();\r\n        };\r\n    }\r\n\r\n    // ============================================================================\r\n    // UTILITY FUNCTIONS\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Create multiple elements at once\r\n     */\r\n    export function createElements(elements: any[]): DocumentFragment {\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        elements.forEach(el => {\r\n            if (el instanceof Node) {\r\n                fragment.appendChild(el);\r\n            }\r\n        });\r\n\r\n        return fragment;\r\n    }\r\n\r\n    /**\r\n     * Show/hide element based on condition\r\n     */\r\n    export function Show(props: {\r\n        when: boolean | Signal<boolean>\r\n        children: any\r\n    }): JSXElement | null {\r\n        if (isSignal(props.when)) {\r\n            const placeholder = document.createComment('show');\r\n            const parent = document.createDocumentFragment();\r\n            parent.appendChild(placeholder);\r\n\r\n            let currentElement: Element | null = null;\r\n\r\n            effect(() => {\r\n                const when = props.when as Signal<boolean>;\r\n                const condition = when();\r\n\r\n                if (condition && !currentElement) {\r\n                    // Show: create and insert element\r\n                    const children = normalizeChildren(props.children);\r\n                    currentElement = children[0] as Element;\r\n\r\n                    if (currentElement instanceof Node) {\r\n                        placeholder.parentNode?.insertBefore(currentElement, placeholder);\r\n                    }\r\n                } else if (!condition && currentElement) {\r\n                    // Hide: remove element\r\n                    currentElement.remove();\r\n                    currentElement = null;\r\n                }\r\n            });\r\n\r\n            return parent as any;\r\n        } else {\r\n            // Static condition\r\n            return (props.when as boolean) ? jsx(Fragment, { children: props.children }) : null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render different elements based on condition\r\n     */\r\n    export function Switch(props: {\r\n        children: { when: boolean | Signal<boolean>; children: any }[]\r\n    }): JSXElement | null {\r\n        // Find first matching case\r\n        for (const caseItem of props.children) {\r\n            const condition = isSignal(caseItem.when) ? caseItem.when() : caseItem.when;\r\n\r\n            if (condition) {\r\n                return jsx(Fragment, { children: caseItem.children });\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Iterate over array and render elements\r\n     */\r\n    export function For<T>(props: {\r\n        each: T[] | Signal<T[]>\r\n        children: (item: T, index: number) => JSXElement\r\n    }): JSXElement {\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        if (isSignal(props.each)) {\r\n            // Reactive list\r\n            const container = document.createElement('div');\r\n            container.style.display = 'contents'; // Don't affect layout\r\n\r\n            effect(() => {\r\n                const each = props.each as Signal<T[]>;\r\n                const items = each();\r\n                container.innerHTML = ''; // Clear\r\n\r\n                items.forEach((item: any, index: any) => {\r\n                    const element = props.children(item, index);\r\n                    if (element instanceof Node) {\r\n                        container.appendChild(element);\r\n                    }\r\n                });\r\n            });\r\n\r\n            fragment.appendChild(container);\r\n        } else {\r\n            // Static list\r\n            const each = props.each as T[];\r\n            each.forEach((item, index) => {\r\n                const element = props.children(item, index);\r\n                if (element instanceof Node) {\r\n                    fragment.appendChild(element);\r\n                }\r\n            });\r\n        }\r\n\r\n        return fragment as any;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n"]}