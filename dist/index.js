import {isSignal,effect}from'@minejs/signals';var f=[],d=false;function m(e,n,o={}){let t=typeof n=="string"?document.querySelector(n):n;if(!t)throw new Error(`Container not found: ${n}`);let r=typeof e=="function"?e():e;if(!r)throw new Error("Component returned null or undefined");switch(o.mode||"replace"){case "replace":t.innerHTML="",t.appendChild(r);break;case "append":t.appendChild(r);break;case "prepend":t.insertBefore(r,t.firstChild);break;default:t.innerHTML="",t.appendChild(r);}return o.onMount?.(),{element:r,unmount:()=>{if(r instanceof Element)r.remove();else if(r instanceof DocumentFragment)for(;r.firstChild;)r.removeChild(r.firstChild);o.onUnmount?.();},update:i=>{r instanceof Element&&i instanceof Element?r.replaceWith(i):i instanceof Element&&r instanceof DocumentFragment&&r.parentNode&&r.parentNode.replaceChild(i,r);}}}function v(e,n){return m(e,n,{mode:"replace"})}function S(e,n){let o=typeof n=="string"?document.querySelector(n):n;if(!o)throw new Error(`Portal container not found: ${n}`);let t=document.createComment("portal");return e instanceof Node&&o.appendChild(e),t}function b(e,n){let o=typeof n=="string"?document.querySelector(n):n,t=o instanceof HTMLElement?o:null;if(!t)throw new Error(`Container not found: ${n}`);return m(e,t,{mode:"replace"})}function P(e,n){let o=null,t=false,r=null;return l=>{if(o)return o(l);if(r){let i=document.createElement("div");return i.className="crux-lazy-error",i.textContent=`Error loading component: ${r.message}`,i.style.color="red",i}return t||(t=true,e().then(i=>{o=i.default;}).catch(i=>{r=i instanceof Error?i:new Error(String(i));})),n||y()}}function y(){let e=document.createElement("div");return e.textContent="Loading...",e}function H(e){try{return e.children}catch(n){return e.fallback(n)}}function F(e){if(e.children instanceof Promise){let n=document.createElement("div");return n.style.display="contents",e.fallback instanceof Node&&n.appendChild(e.fallback),e.children.then(o=>{n.innerHTML="",o instanceof Node&&n.appendChild(o);}),n}else return e.children}function D(e){return S(e.children,e.to)}function z(e){f.push(e),d||(d=true,queueMicrotask(C));}function C(){let e=f;f=[],d=false,e.forEach(n=>n());}function x(){return typeof window<"u"&&typeof document<"u"}function A(e){x()&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e());}function R(e){let n=typeof e=="string"?document.querySelector(e):e;if(!n||!(n instanceof HTMLElement))throw new Error(`Root container not found: ${e}`);let o=null;return {render(t){o&&o.unmount(),o=m(t,n);},unmount(){o&&(o.unmount(),o=null);}}}function O(e){return console.log("Minifying HTML..."),e.replace(/\s+/g," ").replace(/>\s+</g,"><").trim()}function c(e){return e.replace(/\s+/g," ").trim()}function p(e,n){return typeof e=="function"?e(n||{}):J(e,n||{})}var B=p;function g(e){let n=document.createDocumentFragment();return u(e.children).forEach(t=>{t instanceof Node&&n.appendChild(t);}),n}function J(e,n){let o=document.createElement(e);for(let[t,r]of Object.entries(n))if(t==="children")X(o,r);else if(t==="ref")M(o,r);else if(t.startsWith("on"))T(o,t,r);else if(t==="className"||t==="class")L(o,r);else if(t==="style")w(o,r);else if(isSignal(r))N(o,t,r);else if(typeof r=="boolean")r&&o.setAttribute(t,"");else if(r!=null)if(t in o)o[t]=r;else {let l=typeof r=="string"?c(r):String(r);o.setAttribute(t,l);}return o}function X(e,n){u(n).forEach(t=>{if(t instanceof Node)e.appendChild(t);else if(isSignal(t)){let r=document.createTextNode("");effect(()=>{r.textContent=String(t());}),e.appendChild(r);}else t!=null&&t!==false&&e.appendChild(document.createTextNode(String(t)));});}function u(e){return e==null||e===false?[]:Array.isArray(e)?e.flatMap(u):[e]}function M(e,n){isSignal(n)?n.set(e):typeof n=="function"&&n(e);}function T(e,n,o){if(typeof o!="function")return;let t=n.slice(2).toLowerCase();e.addEventListener(t,o);}function L(e,n){isSignal(n)?effect(()=>{let o=n();o!=null&&(e.className=c(String(o)));}):n!=null&&(e.className=c(String(n)));}function w(e,n){isSignal(n)?effect(()=>{let o=n();h(e,o);}):h(e,n);}function h(e,n){typeof n=="string"?e.style.cssText=n:typeof n=="object"&&n!=null&&Object.entries(n).forEach(([o,t])=>{if(t!=null){let r=o.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`);e.style.setProperty(r,String(t));}});}function N(e,n,o){effect(()=>{let t=o();if(t!=null)if(n==="className"||n==="class")e.className=c(String(t));else if(n in e)e[n]=t;else {let r=typeof t=="string"?c(t):String(t);e.setAttribute(n,r);}else e.removeAttribute(n);});}function U(e){return e}function V(e){return n=>e(n)()}function W(e){let n=document.createDocumentFragment();return e.forEach(o=>{o instanceof Node&&n.appendChild(o);}),n}function I(e){if(isSignal(e.when)){let n=document.createComment("show"),o=document.createDocumentFragment();o.appendChild(n);let t=null;return effect(()=>{let r=e.when,l=r();l&&!t?(t=u(e.children)[0],t instanceof Node&&n.parentNode?.insertBefore(t,n)):!l&&t&&(t.remove(),t=null);}),o}else return e.when?p(g,{children:e.children}):null}function K(e){for(let n of e.children)if(isSignal(n.when)?n.when():n.when)return p(g,{children:n.children});return null}function Q(e){let n=document.createDocumentFragment();if(isSignal(e.each)){let o=document.createElement("div");o.style.display="contents",effect(()=>{let t=e.each,r=t();o.innerHTML="",r.forEach((l,i)=>{let E=e.children(l,i);E instanceof Node&&o.appendChild(E);});}),n.appendChild(o);}else e.each.forEach((t,r)=>{let l=e.children(t,r);l instanceof Node&&n.appendChild(l);});return n}export{H as ErrorBoundary,Q as For,g as Fragment,I as Show,F as Suspense,K as Switch,D as Teleport,U as component,W as createElements,S as createPortal,R as createRoot,V as defineComponent,b as hydrate,x as isBrowser,p as jsx,B as jsxs,P as lazy,O as minifyHTML,v as mount,c as normalizeString,A as onDOMReady,z as queueUpdate,m as render};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map